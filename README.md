# üìä Finance Tracker Bot

Telegram-–±–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ –ª–∏—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π **Google Sheets**.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ç—ã —Å Google-—Ç–∞–±–ª–∏—Ü–∞–º–∏.

---

## üì¶ –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)  
- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)  
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)  
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)  
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–æ–∫—Ä—É–∂–µ–Ω–∏—è)  
- [–®–∞–±–ª–æ–Ω .env](#—à–∞–±–ª–æ–Ω-env)  
- [–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ](#–∑–∞–ø—É—Å–∫-–ª–æ–∫–∞–ª—å–Ω–æ)  
- [–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker](#–∑–∞–ø—É—Å–∫-—á–µ—Ä–µ–∑-docker)  
- [–î–µ–ø–ª–æ–π –Ω–∞ Render](#–¥–µ–ø–ª–æ–π-–Ω–∞-render)  
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api)  
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–±–æ—Ç–∞)  
- [–ü–æ–¥–¥–µ—Ä–∂–∫–∞](#–ø–æ–¥–¥–µ—Ä–∂–∫–∞)

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

**Finance Tracker Bot** ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–µ—Å—Ç–∏ —É—á—ë—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø—Ä—è–º–æ –≤ Telegram.  
–í—ã –ø–∏—à–µ—Ç–µ –≤ –±–æ—Ç–∞ —Ç—Ä–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: `150 –∫–æ—Ñ–µ`), –∞ –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –≤–∞—à—É Google-—Ç–∞–±–ª–∏—Ü—É.  

–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ—è —Ç–∞–±–ª–∏—Ü–∞, —Å–≤–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã –∏ API-–∫–ª—é—á.

---

## ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üì• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞  
- üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤ Google Sheets  
- üë• –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ –±–∞–∑—É –∏ API-–∫–ª—é—á–∏)  
- üîë API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ç, —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)  
- ü©∫ Healthcheck –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
- ‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ –¥–µ–ø–ª–æ—è –Ω–∞ Render  
- üîî –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ¬´–±—É–¥–∏—Ç—å¬ª Render —á–µ—Ä–µ–∑ GitHub Actions –∏–ª–∏ UptimeRobot  

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ bot.py                  # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ main.py                 # API –Ω–∞ FastAPI
‚îú‚îÄ‚îÄ run_all.py              # –∑–∞–ø—É—Å–∫–∞–µ—Ç API –∏ –±–æ—Ç–∞ –≤–º–µ—Å—Ç–µ
‚îú‚îÄ‚îÄ database.py             # —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ helpers/
‚îÇ   ‚îî‚îÄ‚îÄ add_user.py         # —Å–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑—É
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ .github/workflows/
    ‚îî‚îÄ‚îÄ ping.yml            # GitHub Actions –¥–ª—è "–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è" Render
```

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python **3.10+**  
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:  
  ```bash
  pip install -r requirements.txt
  ```  
- –ê–∫–∫–∞—É–Ω—Ç Telegram-–±–æ—Ç–∞ (—Ç–æ–∫–µ–Ω –æ—Ç **@BotFather**)  
- –°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç Google (JSON-–∫–ª—é—á) —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Sheets  

---

## üõ† –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–Ω–∞—á–∞–ª–∞ —Å–∫–æ–ø–∏—Ä—É–π `.env.example` ‚Üí `.env`:

```bash
cp .env.example .env
```

---

## üìë –®–∞–±–ª–æ–Ω .env

```env
# Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
YOUR_TELEGRAM_ID=123456789
YOUR_NAME=Andrew
YOUR_SPREADSHEET_ID=spreadsheet_id_from_google
YOUR_API_KEY=supersecretkey

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ø—Ä–∏–º–µ—Ä)
VIKTORIA_TELEGRAM_ID=987654321
VIKTORIA_NAME=Viktoria
VIKTORIA_SPREADSHEET_ID=another_spreadsheet_id
VIKTORIA_API_KEY=anothersecretkey

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API
API_HOST=0.0.0.0
API_PORT=8000
DEBUG=True

# Google credentials (–¥–ª—è Render ‚Äî –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É)
GOOGLE_CREDENTIALS={"type":"service_account","project_id":"...","private_key":"..."}
```

---

## üñ• –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

2. –î–æ–±–∞–≤—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –±–∞–∑—É:

   ```bash
   python helpers/add_user.py
   ```

3. –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë –≤–º–µ—Å—Ç–µ (API + –±–æ—Ç):

   ```bash
   python run_all.py
   ```

- API ‚Üí `http://localhost:8000`  
- –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É —Å–æ–æ–±—â–µ–Ω–∏–π  

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker build -t finance-tracker .
docker run -p 8000:8000 --env-file .env finance-tracker
```

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –±–∞–∑–æ–π –∏ –±–æ—Ç–æ–º –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker-compose`.

---

## üåê –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –ü–æ–¥–∫–ª—é—á–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫ **Render** –∫–∞–∫ Web Service.  
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É–∫–∞–∂–∏:
   - **Docker environment**  
   - **Docker Command**: `python run_all.py`  
3. –î–æ–±–∞–≤—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–∑ `.env`).  
   - `GOOGLE_CREDENTIALS` —Å–∫–æ–ø–∏—Ä—É–π –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.  
4. –î–µ–ø–ª–æ–π ‚Äî –∏ API + –±–æ—Ç –≥–æ—Ç–æ–≤—ã üéâ  

–ß—Ç–æ–±—ã Render –Ω–µ –∑–∞—Å—ã–ø–∞–ª, –º–æ–∂–Ω–æ:  
- –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub Actions (—Å–º. `.github/workflows/ping.yml`),  
- –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UptimeRobot –¥–ª—è –ø–∏–Ω–≥–∞ `/health`.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

| –ú–µ—Ç–æ–¥ | URL             | –¢–µ–ª–æ JSON                                                | –ó–∞–≥–æ–ª–æ–≤–∫–∏               | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----------------|----------------------------------------------------------|--------------------------|----------|
| POST  | `/api/users`    | `{ "telegram_id":123, "name":"Andrew", "spreadsheet_id":"...", "api_key":"..." }` | ‚Äî                        | –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST  | `/api/expense`  | `{ "amount":150, "category":"–µ–¥–∞", "description":"–∫–æ—Ñ–µ" }` | `X-API-Key: your_key`   | –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥ |
| GET   | `/api/users`    | ‚Äî                                                        | ‚Äî                        | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| GET   | `/health`       | ‚Äî                                                        | ‚Äî                        | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ |

---

## üí¨ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

- `/start` ‚Äî –∑–∞–ø—É—Å–∫  
- `150 –∫–æ—Ñ–µ` ‚Üí –¥–æ–±–∞–≤–∏—Ç —Ä–∞—Å—Ö–æ–¥ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–∫–æ—Ñ–µ"  
- `/categories` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π  
- `/myid` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ–π Telegram ID  
- `/help` ‚Äî –ø–æ–º–æ—â—å  

---

## üõ† –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –ï—Å–ª–∏ Render –∑–∞—Å—ã–ø–∞–µ—Ç ‚Äî –Ω–∞—Å—Ç—Ä–æ–π GitHub Actions (—Å–º. `.github/workflows/ping.yml`)  
- –•—Ä–∞–Ω–∏ –∫–ª—é—á–∏ –∏ —Ç–æ–∫–µ–Ω—ã —Ç–æ–ª—å–∫–æ –≤ `.env`  
- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å PostgreSQL –≤–º–µ—Å—Ç–æ SQLite  

---

‚úçÔ∏è –ê–≤—Ç–æ—Ä: [@andrabra](https://github.com/andrabra)  
üöÄ Pull Requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!
